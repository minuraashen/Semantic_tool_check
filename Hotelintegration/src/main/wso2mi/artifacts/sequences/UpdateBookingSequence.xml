<?xml version="1.0" encoding="UTF-8"?>
<sequence xmlns="http://ws.apache.org/ns/synapse" name="UpdateBookingSequence">
    <log category="INFO">
        <message>Updating booking ${vars.bookingId}</message>
    </log>
    
    <variable name="updatedGuestName" expression="${payload.guestName}" type="STRING"/>
    <variable name="updatedRoomType" expression="${payload.roomType}" type="STRING"/>
    
    <payloadFactory media-type="json">
        <format>
            {
                "status": "success",
                "message": "Booking updated successfully",
                "booking": {
                    "bookingId": "${vars.bookingId}",
                    "guestName": "${vars.updatedGuestName}",
                    "roomType": "${vars.updatedRoomType}",
                    "updatedAt": "${formatDateTime(now(), 'yyyy-MM-dd HH:mm:ss')}"
                }
            }
        </format>
    </payloadFactory>
    
    <respond/>
</sequence>
